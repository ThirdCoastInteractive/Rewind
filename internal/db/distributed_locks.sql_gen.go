// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: distributed_locks.sql

package db

import (
	"context"
)

const advisoryUnlock = `-- name: AdvisoryUnlock :one
SELECT pg_advisory_unlock($1::bigint) AS unlocked
`

// Releases a PostgreSQL advisory lock
// Returns true if the lock was released, false if it wasn't held
//
//	SELECT pg_advisory_unlock($1::bigint) AS unlocked
func (q *Queries) AdvisoryUnlock(ctx context.Context, lockID int64) (bool, error) {
	row := q.db.QueryRow(ctx, advisoryUnlock, lockID)
	var unlocked bool
	err := row.Scan(&unlocked)
	return unlocked, err
}

const tryAdvisoryLock = `-- name: TryAdvisoryLock :one
SELECT pg_try_advisory_lock($1::bigint) AS acquired
`

// Attempts to acquire a PostgreSQL advisory lock (non-blocking)
// Returns true if the lock was acquired, false if it's already held
//
//	SELECT pg_try_advisory_lock($1::bigint) AS acquired
func (q *Queries) TryAdvisoryLock(ctx context.Context, lockID int64) (bool, error) {
	row := q.db.QueryRow(ctx, tryAdvisoryLock, lockID)
	var acquired bool
	err := row.Scan(&acquired)
	return acquired, err
}
