// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: instance_settings_queries.sql

package db

import (
	"context"
)

const getInstanceSettings = `-- name: GetInstanceSettings :one
SELECT id, registration_enabled, clip_export_storage_limit_bytes, admin_emails, updated_at FROM instance_settings WHERE id = 1
`

// GetInstanceSettings fetches the single instance settings row
//
//	SELECT id, registration_enabled, clip_export_storage_limit_bytes, admin_emails, updated_at FROM instance_settings WHERE id = 1
func (q *Queries) GetInstanceSettings(ctx context.Context) (*InstanceSetting, error) {
	row := q.db.QueryRow(ctx, getInstanceSettings)
	var i InstanceSetting
	err := row.Scan(
		&i.ID,
		&i.RegistrationEnabled,
		&i.ClipExportStorageLimitBytes,
		&i.AdminEmails,
		&i.UpdatedAt,
	)
	return &i, err
}

const upsertAdminEmails = `-- name: UpsertAdminEmails :exec
INSERT INTO instance_settings (id, registration_enabled, admin_emails, updated_at)
VALUES (1, TRUE, $1, NOW())
ON CONFLICT (id) DO UPDATE
SET admin_emails = EXCLUDED.admin_emails,
    updated_at = NOW()
`

// UpsertAdminEmails sets admin emails (creates row if missing)
//
//	INSERT INTO instance_settings (id, registration_enabled, admin_emails, updated_at)
//	VALUES (1, TRUE, $1, NOW())
//	ON CONFLICT (id) DO UPDATE
//	SET admin_emails = EXCLUDED.admin_emails,
//	    updated_at = NOW()
func (q *Queries) UpsertAdminEmails(ctx context.Context, adminEmails []string) error {
	_, err := q.db.Exec(ctx, upsertAdminEmails, adminEmails)
	return err
}

const upsertClipExportStorageLimit = `-- name: UpsertClipExportStorageLimit :exec
INSERT INTO instance_settings (id, registration_enabled, admin_emails, clip_export_storage_limit_bytes, updated_at)
VALUES (1, TRUE, ARRAY[]::text[], $1, NOW())
ON CONFLICT (id) DO UPDATE
SET clip_export_storage_limit_bytes = EXCLUDED.clip_export_storage_limit_bytes,
    updated_at = NOW()
`

// UpsertClipExportStorageLimit sets clip export storage limit (creates row if missing)
//
//	INSERT INTO instance_settings (id, registration_enabled, admin_emails, clip_export_storage_limit_bytes, updated_at)
//	VALUES (1, TRUE, ARRAY[]::text[], $1, NOW())
//	ON CONFLICT (id) DO UPDATE
//	SET clip_export_storage_limit_bytes = EXCLUDED.clip_export_storage_limit_bytes,
//	    updated_at = NOW()
func (q *Queries) UpsertClipExportStorageLimit(ctx context.Context, limitBytes int64) error {
	_, err := q.db.Exec(ctx, upsertClipExportStorageLimit, limitBytes)
	return err
}

const upsertRegistrationEnabled = `-- name: UpsertRegistrationEnabled :exec
INSERT INTO instance_settings (id, registration_enabled, admin_emails, updated_at)
VALUES (1, $1, $2, NOW())
ON CONFLICT (id) DO UPDATE
SET registration_enabled = EXCLUDED.registration_enabled,
    admin_emails = EXCLUDED.admin_emails,
    updated_at = NOW()
`

type UpsertRegistrationEnabledParams struct {
	RegistrationEnabled bool     `db:"registration_enabled" json:"RegistrationEnabled"`
	AdminEmails         []string `db:"admin_emails" json:"AdminEmails"`
}

// UpsertRegistrationEnabled sets registration_enabled (creates row if missing)
//
//	INSERT INTO instance_settings (id, registration_enabled, admin_emails, updated_at)
//	VALUES (1, $1, $2, NOW())
//	ON CONFLICT (id) DO UPDATE
//	SET registration_enabled = EXCLUDED.registration_enabled,
//	    admin_emails = EXCLUDED.admin_emails,
//	    updated_at = NOW()
func (q *Queries) UpsertRegistrationEnabled(ctx context.Context, arg *UpsertRegistrationEnabledParams) error {
	_, err := q.db.Exec(ctx, upsertRegistrationEnabled, arg.RegistrationEnabled, arg.AdminEmails)
	return err
}
